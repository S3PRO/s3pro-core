<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.8.xsd"
        logicalFilePath="2023-03-23-12-00-IP-0001-initial-schema.xml">

    <changeSet id="IP-0001-initial-schema" author="amanivchuk">
        <sql>
            CREATE TABLE tenants (
                id BIGSERIAL NOT NULL PRIMARY KEY,
                domain_name VARCHAR(255) NOT NULL,
                location VARCHAR(100) NOT NULL,
                environment VARCHAR(100) NOT NULL
            );

            CREATE TABLE users (
                id BIGSERIAL NOT NULL PRIMARY KEY,
                email VARCHAR(255),
                first_name VARCHAR(255),
                last_name VARCHAR(255),
                phone_number VARCHAR(255),
                created_date TIMESTAMP NOT NULL,
                sub_id VARCHAR(255) NOT NULL
            );

            CREATE TABLE tenant_user (
                tenant_id bigint references tenants(id),
                user_id bigint references users(id)
            );

            CREATE TABLE documents (
                id BIGSERIAL NOT NULL PRIMARY KEY,
                name VARCHAR(255) NOT NULL,
                tenant_id bigint NOT NULL references tenants(id)
            );

            CREATE TABLE applications (
                id BIGSERIAL NOT NULL PRIMARY KEY,
                application_name VARCHAR(255) NOT NULL,
                application_type VARCHAR(100) NOT NULL,
                sub_id VARCHAR(100) NOT NULL,
                client_id VARCHAR(255),
                client_secret VARCHAR(255),
                application_grant_type VARCHAR(100),
                tenant_id bigint NOT NULL references tenants(id)
            );

        </sql>
    </changeSet>
</databaseChangeLog>